### [5장] 웹 어댑터 구현하기

- 웹 어댑터

  ![image](https://github.com/ulimy/study/assets/18046394/d9d92433-c6b9-40af-9e68-51b52c92402b)

    - 웹 어댑터는 **인커밍 어댑터이자 아웃고잉 어댑터**이다.
        - 외부로부터 요청을 받아 애플리케이션 코어를 호출한다.
        - 애플리케이션의 처리 결과를 외부로 응답한다.
    - 인커밍 포트를 생략하고 바로 애플리케이션을 호출하지 않고 간접 계층을 넣는 이유
        - 애플리케이션이 외부 세계와 통신함에 대한 명세 역할을 한다.
        - 외부와 어떤 통신을 할 수 있는지 명확히 알 수 있게되어 유지보수에 도움이 된다.


- 웹 어댑터의 책임
    1. HTTP 요청을 자바 객체로 매핑
        - url, http 메서드, 콘텐츠 타입 등등
    2. 권한 검사
        - 권한 인증에 실패할 경우 에러를 반환한다.
    3. 입력 유효성 검증
        - 유즈케이스의 입력 모델에서 진행되는 유효성 검증과는 다르다.
        - **웹 에디터에 입력 모델을 유즈케이스에 입력 모델로 변환할 수 있는지**를 검증하는 것이다.
    4. 입력을 유스케이스의 입력 모델로 매핑
    5. 유스케이스 호출
    6. 유스케이스의 출력을 HTTP로 매핑
    7. HTTP 응답을 반환

    - 책임이 많다고 느껴질 수 있지만, 애플리케이션 계층이 신경 쓸 필요가 없는 것들이기도 하다.
    - 구분이 애매하다 느껴진다면 도메인/애플리케이션 계층을 먼저 개발하자.


- 컨트롤러 나누기
    - 너무 적은 것 보다는 너무 많은 게 낫다.
        - 가능한 좁고, 가능한 다른 컨트롤러와 적게 공유하자.
        - 서로다른 연산에 대한 작업이 병렬로 이뤄질 수 있다.
    - 컨트롤러에 코드가 많다면?
        - 파악이 어려워진다.
        - 테스트코드도 함께 길어진다.
        - 데이터 구조를 재활용할 가능성이 높아진다.
    - 각 연산에 대해 별도의 패키지, 별도의 컨트롤러로 분리하자.
    - 메서드, 클래스명은 유스케이스를 최대한 반영하자.
