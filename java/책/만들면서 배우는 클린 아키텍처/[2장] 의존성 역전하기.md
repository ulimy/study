### [2장] 의존성 역전하기

> 계층형 아키텍쳐의 대안
>

- 단일 책임 원칙 ( SRP )

  > 컴포넌트를 변경하는 이유는 오직 하나뿐이어야 한다.
  >
    - 하나의 이유로 변경한다는 것은 해당 컴포넌트가 맡고있는 책임은 하나라는 것!
    - 여러 컴포넌트에 의해 의존되고 있다면 변경 사항 발생 시 함께 변경 될 가능성이 크다.


- 부수효과 ( Side Effect )
    - 하나의 로직을 변경했을 때 예상치 못한 곳이 함께 변경되는 현상
    - 부수효과를 피하게 위해 다른 방식을 사용한다는 것은, 잘못 구조화된 소프트웨어를 변경하는데 더 많은 비용을 지불해야함을 의미한다.


- 의존성 역전 원칙 ( DIP )
    - 도메인 계층에 인터페이스를 만들고, 영속성 계층에서 이를 구현해보자.
    - 영속성 계층에 변경사항이 생겨도 도메인 계층은 변경이 불필요하다!


- 클린 아키텍처에서 ORM을 사용한다면
    - 도메인 계층에서 사용할 entity와 영속성 계층에서 사용할 entity를 분리하는 것이 바람직하다.
    - 영속성 계층에서 사용하는 entity에는 인자가 없는 기본 생성자 추가가 강제된다

      ⇒ 도메인 계층에서는 필요 없음!


- 헥사고날 아키텍쳐 ( 육각형 아키텍쳐 )

  ![image](https://github.com/ulimy/study/assets/18046394/32839635-6e9a-4f42-b86a-f3c73253952b)

    - 유스케이스
        - 도메인 엔티티와 상호작용한다.
    - 어댑터
        - 애플리케이션과 상호작용한다.
        - 웹, 데이터베이스, 외부시스템 등등!
        - 유스케이스에서 호출되어 여러 애플리케이션을 사용할 수 있도록 interface 형태로 구현된다.

  ⇒ 도메인 코드가 바깥쪽 코드에 의존하기 않음으로써 결합을 제거한다!
