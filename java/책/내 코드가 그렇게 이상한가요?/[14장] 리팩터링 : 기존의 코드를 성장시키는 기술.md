### [14장] 리팩터링 : 기존의 코드를 성장시키는 기술

- 리팩터링

  > 실질적인 동작은 유지하면서 구조만 정리하는 작업


- 리팩터링 요소
    - 중첩을 제거하여 보기 좋게 만들기
        - 조건 반전, early return등을 이용하여 정리하자.
    - 의미 단위로 로직 정리하기
        - 조건 확인, 값 대입 등을 분리해서 정리하자.
    - 조건을 읽기 쉽게 하기
        - ! 키워드 대신 긍정형을 사용함으로써 조건문을 읽기 쉽게 하자.
    - 목적을 나타내는 메서드로 분리하기
        - 무턱대고 작성된 코드를 목적 단위로 분리하자.


- 단위 테스트로 실수 방지하기.
    - 리팩터링 시에는 실질적인 동작이 변하지 않아야 한다. 이를 증명할 수 있는 수단 중 하나가 단위 테스트이다.
    - 이상적인 흐름
        1. 클래스 기본 형태 잡기
        2. 기본 형태를 기반으로 테스트코드 작성하기
        3. 테스트 실패시키기
        4. 테스트 성공을 위한 최소한의 코드 작성하기
        5. 테스트가 성공할 수 있도록 리팩토링 하기


- 불확실한 사양을 이해하기 위한 분석 방법
    1. 문서화 테스트
        - 메서드의 사양을 파악하기 위해 테스트코드를 작성한다.
        - 어떤 입력값이 들어가면 어떤 출력값이 나오는지 확인할 수 있다.
    2. 스크래치 리팩터링
        - 로직의 의미와 구조를 분석하기 위해 시험삼아 리팩터링 해본다.
        - 분석용이므로 절대 병합하지 말자!
        - 이를 기반으로 테스트코드를 작성하면서 정식으로 리팩터링 하자.
    3. IDE의 리팩터링 기능
        - 이름 변경
        - 메서드 추출

       등등..


- 리팩터링 시 주의사항
    - 기능추가와 동시에 하지 않기
    - 작은 단계로 실시하기
    - 불필요한 사양은 제거하기
