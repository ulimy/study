### [1장] 계층형 아키텍처의 문제는 무엇일까?

- 계층형 아키텍처란?

  > 웹 → 도메인 → 영속성
  >

  웹 계층에서 요청을 받아, 도메인 계층에서 비즈니스 로직을 수행하고, 영속성 계층에서 저장하는 아키텍처


- 데이터베이스 주도 설계를 유도한다.
    - 대부분 로직을 만들 때, 도메인이 아니라 데이터베이스 저장 구조를 먼저 생각한다.
    - 가장 큰 원인은 ORM 프레임워크를 사용하기 때문이다.

      ⇒ entity를 비즈니스 모델처럼 사용하게 됨으로서 영속성 코드가 사실상 도메인 코드로 녹아들어간다.


- 지름길을 택하기 쉬워진다.
    - 상위계층의 컴포넌트는 접근 불가하다는 규칙만 존재하기 때문에, 만약 접근해야한다면 아래로 내려버린다.

      ⇒ 손쉽게 문제를 해결!

    - 아래로 내리는 코드가 많아질수록 영속성 계층은 점점 더 비해진다.
    - 레포지토리 하나만 있었던 코드가 헬퍼, 유틸리티 등등 끝없이 늘어난다.


- 테스트하기 어려워진다.
    - 서로다른 계층에서 테스트하려면 모킹이 필수적이다.
    - 실제로 테스트 코드를 작성하는 것보다 종속성을 이해하고 목을 만드는데 더 많은 시간이 걸리게 된다.


- 유스케이스를 숨긴다.
    - 도메인 로직이 여러 계층에 흩어져있기 쉽다.
        - 상위 계층에 존재할 수 없다면 영속성계층으로 내려버렸기 때문!
    - 높이의 규칙은 있지만, 너비의 규칙은 없다.
        - 각 계층이 얼마나 뚱뚱해지든 상관없음!

  ⇒ 하나의 유즈케이스에 관련되 영향범위를 파악하기 어렵다.


- 동시 작업이 어려워진다.
    - 영속성 → 도메인 → 웹 순서대로 구현되어야하기 때문에 하나의 기능에 대해 여러 개발자가 한번에 작업할 수 없다.
    - 같은 서비스를 동시에 편집할 가능성이 높아 서로 다른 기능을 동시에 작업하다 충돌이 발생할 수 있다.
